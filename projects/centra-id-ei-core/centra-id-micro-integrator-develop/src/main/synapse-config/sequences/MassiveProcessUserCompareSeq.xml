<?xml version="1.0" encoding="UTF-8"?>
<sequence name="MassiveProcessUserCompareSeq" onError="FaultMassiveProcessUsersSeq" trace="disable" xmlns="http://ws.apache.org/ns/synapse" xmlns:cen="centra-id.com">
    <log level="custom" category="DEBUG">
        <property name="MassiveProcessUserCompareSeq" value="Inicio.." />
        <property name="identificacionSupervisor.1" expression="get-property('identificacionSupervisor')" />
        <property name="identificacionSupervisor.2" expression="//*:identificacionSupervisor" />
        <property name="nombreSupervisor.1" expression="get-property('nombreSupervisor')" />
        <property name="nombreSupervisor.2" expression="//*:nombreSupervisor" />
        <property name="nombreAgrupacion.1" expression="get-property('nombreAgrupacion')" />
        <property name="nombreAgrupacion.2" expression="//*:nombreAgrupacion" />
        <property name="nombreAgrupacion.1" expression="get-property('nombreAgrupacion')" />
        <property name="nombreAgrupacion.2" expression="//*:nombreAgrupacion" />
        <property name="nombreNivelJerarquico.1" expression="get-property('nombreNivelJerarquico')" />
        <property name="nombreNivelJerarquico.2" expression="//*:nombreNivelJerarquico" />
        <property name="fechaIngresoEmpleado.1" expression="get-property('fechaIngresoEmpleado')" />
        <property name="fechaIngresoEmpleado.2" expression="//*:fechaIngresoEmpleado" />
        <property name="estadoEmpleado.1" expression="get-property('estadoEmpleado')" />
        <property name="estadoEmpleado.2" expression="//*:estadoEmpleado" />

    </log>
    <script language="js">
        <![CDATA[
			var log = mc.getServiceLog();       
            var modify='0';
            var recalculate='0';

            if(mc.getProperty('codigoTrabajador')!=mc.getPayloadXML()..*::codigoTrabajador)  {modify=1;  log.debug('codigoTrabajador'); }
            if(mc.getProperty('apellidosEmpleado')!=mc.getPayloadXML()..*::apellidosEmpleado)  {modify='1';  log.debug('apellidosEmpleado'); }
            if(mc.getProperty('nombresEmpleado')!=mc.getPayloadXML()..*::nombresEmpleado)  {modify='1';  log.debug('nombresEmpleado'); }
            if(mc.getProperty('identificacion')!=mc.getPayloadXML()..*::identificacion)  {modify='1';  log.debug('identificacion'); }
            if(mc.getProperty('identificacionSupervisor')!=mc.getPayloadXML()..*::identificacionSupervisor)  {modify='1';  log.debug('identificacionSupervisor'); }
            if(mc.getProperty('nombreSupervisor')!=mc.getPayloadXML()..*::nombreSupervisor)  {modify='1';  log.debug('nombreSupervisor'); }
            if(mc.getProperty('codigoCompania')!=mc.getPayloadXML()..*::codigoCompania)  {modify='1'; recalculate='1'; log.debug('codigoCompania'); }
            if(mc.getProperty('nombreCompania')!=mc.getPayloadXML()..*::nombreCompania)  {modify='1'; recalculate='1'; log.debug('nombreCompania'); }
            if(mc.getProperty('codigoAgrupacion')!=mc.getPayloadXML()..*::codigoAgrupacion)  {modify='1';  log.debug('codigoAgrupacion'); }
            //if(mc.getProperty('nombreAgrupacion')!=mc.getPayloadXML()..*::nombreAgrupacion)  {modify='1';  log.debug('nombreAgrupacion'); }
            if(mc.getProperty('codigoDivision')!=mc.getPayloadXML()..*::codigoDivision)  {modify='1'; recalculate='1'; log.debug('codigoDivision'); }
            if(mc.getProperty('nombreDivision')!=mc.getPayloadXML()..*::nombreDivision)  {modify='1'; recalculate='1'; log.debug('nombreDivision'); }
            if(mc.getProperty('codigoDepartamento')!=mc.getPayloadXML()..*::codigoDepartamento)  {modify='1'; recalculate='1'; log.debug('codigoDepartamento'); }
            if(mc.getProperty('nombreDepartamento')!=mc.getPayloadXML()..*::nombreDepartamento)  {modify='1'; recalculate='1'; log.debug('nombreDepartamento'); }
            if(mc.getProperty('codigoArea')!=mc.getPayloadXML()..*::codigoArea)  {modify='1'; recalculate='1'; log.debug('codigoArea'); }
            if(mc.getProperty('nombreArea')!=mc.getPayloadXML()..*::nombreArea)  {modify='1'; recalculate='1'; log.debug('nombreArea'); }
            if(mc.getProperty('codigoCentroCosto')!=mc.getPayloadXML()..*::codigoCentroCosto)  {modify='1';  log.debug('codigoCentroCosto'); }
            if(mc.getProperty('nombreCentroCosto')!=mc.getPayloadXML()..*::nombreCentroCosto)  {modify='1';  log.debug('nombreCentroCosto'); }
            if(mc.getProperty('nombreLocalidad')!=mc.getPayloadXML()..*::nombreLocalidad)  {modify='1';  log.debug('nombreLocalidad'); }
            if(mc.getProperty('nombreCargo')!=mc.getPayloadXML()..*::nombreCargo)  {modify='1'; recalculate='1';  log.debug('nombreCargo'); }
            if(mc.getProperty('codigoNivelJerarquico')!=mc.getPayloadXML()..*::codigoNivelJerarquico)  {modify='1';  log.debug('codigoNivelJerarquico'); }
            //if(mc.getProperty('nombreNivelJerarquico')!=mc.getPayloadXML()..*::nombreNivelJerarquico)  {modify='1';  log.debug('nombreNivelJerarquico'); }
            if(mc.getProperty('numeroCuentaDeposito')!=mc.getPayloadXML()..*::numeroCuentaDeposito)  {modify='1';  log.debug('numeroCuentaDeposito'); }
            if(mc.getProperty('fechaIngresoEmpleado')!=mc.getPayloadXML()..*::fechaIngresoEmpleado)  {modify='1';  log.debug('fechaIngresoEmpleado'); }
            if(mc.getProperty('fechaSalidaEmpleado')!=mc.getPayloadXML()..*::fechaSalidaEmpleado)  {modify='1';  log.debug('fechaSalidaEmpleado'); }
            //if(mc.getProperty('estadoEmpleado')!=mc.getPayloadXML()..*::estadoEmpleado)  {modify='1';  log.debug('estadoEmpleado'); }
            if(mc.getProperty('celular')!=mc.getPayloadXML()..*::celular)  {modify='1';  log.debug('celular'); }
            if(mc.getProperty('codigoEmpleado')!=mc.getPayloadXML()..*::codigoEmpleado)  {modify='1';  log.debug('codigoEmpleado'); }
            if(mc.getProperty('tipoUsuario')!=mc.getPayloadXML()..*::tipoUsuario)  {modify='1';  log.debug('tipoUsuario'); }
            if(mc.getProperty('subTipo')!=mc.getPayloadXML()..*::subTipo)  {modify='1';  log.debug('subTipo'); }

            mc.setProperty('modifyData',modify);
            mc.setProperty('profileRecalculation',recalculate);
	    ]]>
    </script>
    <log level="custom" category="DEBUG">
        <property name="modifyData" expression="get-property('modifyData')" />
        <property name="profileRecalculation" expression="get-property('profileRecalculation')" />
        <property name="MassiveProcessUserCompareSeq" value="Fin..." />
    </log>
</sequence>
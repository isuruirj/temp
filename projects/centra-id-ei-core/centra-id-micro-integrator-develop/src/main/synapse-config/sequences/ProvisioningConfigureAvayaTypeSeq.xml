<?xml version="1.0" encoding="UTF-8"?>
<sequence name="ProvisioningConfigureAvayaTypeSeq" onError="FaultSeq" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <log level="custom" category="DEBUG">
        <property name="ProvisioningConfigureAvayaTypeSeq" value="Inicio.." />
    </log>
    <switch source="$ctx:operationProvisioning//operationProvisioningList/operationProvisioning/transactionalIdentity/companyCode/text()">
        <case regex="BCPI">
            <filter regex="true" source="$ctx:operationProvisioning//operationProvisioningList/operationProvisioning/transactionalIdentity/hierarchicalLevelCode/text() &lt; get-property('HIERARCHY_CHIEFS')">
                <then>
                    <property name="avaya" value="Avaya_1_Adv" />
                </then>
                <else>
                    <property name="avaya" value="Avaya_1_Med" />
                </else>
            </filter>
        </case>
        <case regex="TCS">
            <property name="avaya" value="Avaya_1_Med" />
        </case>
        <default>
            <property name="avaya" value="" />
        </default>
    </switch>
    <log level="custom" category="DEBUG">
        <property name="ProvisioningConfigureAvayaTypeSeq" value="Fin.." />
    </log>
</sequence>
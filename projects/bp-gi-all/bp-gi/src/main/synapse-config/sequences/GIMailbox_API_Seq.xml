<?xml version="1.0" encoding="UTF-8"?>
<sequence name="GIMailbox_API_Seq" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <log description="seq" level="custom">
        <property name="seq" value="---------- GIMailbox_API_Seq ----------"/>
        <property expression="get-property('SOAP_ACTION_REQUEST')" name="SOAP_ACTION_REQUEST"/>
        <property expression="get-property('mailbox')" name="mailbox"/>
        <property expression="get-property('tier')" name="tier"/>
    </log>
    <!--property description="Authorization" expression="fn:concat('Bearer ', get-property('MAILBOX_TOKEN'))" name="Authorization" scope="transport" type="STRING" xmlns:ns="http://org.apache.synapse/xsd"/ -->
    <property description="uri.var.context" name="uri.var.context" scope="default" type="STRING" value="/mailbox/"/>
    <property description="uri.var.host" expression="fn:concat(get-property('ENTERPRISE_INTEGRATOR_HOST'), get-property('uri.var.context'), get-property('uri.var.resourcepath'))" name="uri.var.host" scope="default" type="STRING" xmlns:ns="http://org.apache.synapse/xsd"/>
    <property description="HTTP_METHOD:POST" name="HTTP_METHOD" scope="axis2" type="STRING" value="POST"/>
    <property action="remove" description="Remove #Content-Encoding" name="Content-Encoding" scope="transport"/>
    <property action="remove" description="Remove #Accept-Encoding" name="Accept-Encoding" scope="transport"/>
    <log description="Request Payload" level="custom">
        <property expression="get-property('uri.var.host')" name="uri.var.host"/>
        <property expression="json-eval($.)" name="payload"/>
    </log>
    <call>
        <endpoint key="GIMailbox_EP"/>
    </call>
    <log description="Mailbox Response" level="full"/>
</sequence>

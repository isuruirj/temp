<?xml version="1.0" encoding="UTF-8"?>
<sequence name="GISCIM_Mapping_LOGICIEL_Seq" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <log description="seq" level="custom">
        <property name="seq" value="-------------------- GISCIM_Mapping_LOGICIEL_Seq --------------------"/>
    </log>
    <switch source="get-property('SOAP_ACTION_REQUEST')">
        <case regex=".*crearUsuario.*">
            <payloadFactory description="LOGICIEL Payload" media-type="json">
                <format>
        		{
	"emails": [
		 {"type": "other", "value": "$1"}
	],
	"schemas": [
		"urn:ietf:params:scim:schemas:core:2.0:User",
		"urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"
	],
	"EnterpriseUser" : {
        "tellerName": "$2",
        "nombreUsuario": "$3",
        "cargo": "$4",
        "empresa": "$5",
        "identificacion": "$6",
        "tipoIdentificacion": "$7",
        "centroDeCostos": "$8",
        "claveAcceso": "$9",
        "terminal": "$10",
        "observacion": "$11",
        "mail": "$12",
        "celular": "$13",
        "interno": "$14",
        "enviarMail": "$15",
        "cambioPwdInicial": "$16",
        "codigoTipoUsuario": "$17",
        "codigoRol": "$18",
        "codigoHorario": "$19",
        "loginSupervisor": "$20",
        "codigoAgenciaDefault": "$21",
        "validarAtributosPerfil": "$22",
        "codigoAtributo": "$23",
        "codigoEstado": "$24",
        "perfilAplicacionDefault": "$25",
        "perfilesAplicacionTemporal": "$26",
        "agenciasPermanentesUsuario": "$27",
        "agenciasTemporalesUsuario": "$28",
        "atributoPerfilAplicacionDefault": "$29",
        "atributoPerfilesAplicacionTemporal": "$30",
        "atributoUsuario": "$31"
        
	},
	"name": {
		"givenName": "$32"
	},
	"userName": "$33",
	"password" : "$34"
}
        		</format>
                <args>
                    <arg evaluator="xml" expression="$body/*/tem:correoElectronico/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:tellerName/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="fn:concat($body//*/tem:apellidosEmpleado/text(),' ', $body//*/tem:nombresEmpleado/text())" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:cargoCompleto/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:empresa/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:identificacion/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:tipoIdentificacion/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg value=""/>
                    <arg evaluator="xml" expression="$body/*/tem:claveAcceso/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:terminal/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:observacion/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:correoElectronico/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:celular/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:interno/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:enviarMail/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:cambioPwdInicial/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoTipoUsuario/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoRol/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoHorario/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:loginSupervisor/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoAgenciaDefault/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:validarAtributosPerfil/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoAtributo/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoEstado/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:perfilAplicacionDefault/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:perfilesAplicacionTemporal/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:agenciasPermanentesUsuario/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:agenciasTemporalesUsuario/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:atributoPerfilAplicacionDefault/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:atributoPerfilesAplicacionTemporal/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:atributoUsuario/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:nombresEmpleado/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="fn:concat(get-property('aplicacion'),'/',get-property('username'))"/>
                    <arg value="default"/>
                </args>
            </payloadFactory>
        </case>
        <case regex=".*modificarUsuario.*">
            <payloadFactory description="LOGICIEL Payload" media-type="json">
                <format>
        		{
	"emails": [
		 {"type": "other", "value": "$1"}
	],
	"schemas": [
		"urn:ietf:params:scim:schemas:core:2.0:User",
		"urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"
	],
	"EnterpriseUser" : {
        "tellerName": "$2",
        "nombreUsuario": "$3",
        "cargo": "$4",
        "empresa": "$5",
        "identificacion": "$6",
        "tipoIdentificacion": "$7",
        "centroDeCostos": "$8",
        "claveAcceso": "$9",
        "terminal": "$10",
        "observacion": "$11",
        "mail": "$12",
        "celular": "$13",
        "interno": "$14",
        "enviarMail": "$15",
        "cambioPwdInicial": "$16",
        "codigoTipoUsuario": "$17",
        "codigoRol": "$18",
        "codigoHorario": "$19",
        "loginSupervisor": "$20",
        "codigoAgenciaDefault": "$21",
        "validarAtributosPerfil": "$22",
        "codigoAtributo": "$23",
        "codigoEstado": "$24",
        "perfilAplicacionDefault": "$25",
        "perfilesAplicacionTemporal": "$26",
        "agenciasPermanentesUsuario": "$27",
        "agenciasTemporalesUsuario": "$28",
        "atributoPerfilAplicacionDefault": "$29",
        "atributoPerfilesAplicacionTemporal": "$30",
        "atributoUsuario": "$31"
        
	},
	"name": {
		"givenName": "$32"
	},
	"userName": "$33"
}
        		</format>
                <args>
                    <arg evaluator="xml" expression="$body/*/tem:correoElectronico/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:tellerName/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="fn:concat($body//*/tem:apellidosEmpleado/text(),' ', $body//*/tem:nombresEmpleado/text())" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:cargoCompleto/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:empresa/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:identificacion/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:tipoIdentificacion/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg value=""/>
                    <arg evaluator="xml" expression="$body/*/tem:claveAcceso/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:terminal/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:observacion/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:correoElectronico/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:celular/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:interno/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:enviarMail/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:cambioPwdInicial/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoTipoUsuario/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoRol/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoHorario/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:loginSupervisor/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoAgenciaDefault/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:validarAtributosPerfil/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoAtributo/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:codigoEstado/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:perfilAplicacionDefault/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:perfilesAplicacionTemporal/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:agenciasPermanentesUsuario/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:agenciasTemporalesUsuario/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:atributoPerfilAplicacionDefault/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:atributoPerfilesAplicacionTemporal/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:especificos/tem:atributoUsuario/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="$body/*/tem:nombresEmpleado/text()" xmlns:tem="http://tempuri.org/"/>
                    <arg evaluator="xml" expression="fn:concat(get-property('aplicacion'),'/',get-property('username'))"/>
                </args>
            </payloadFactory>
        </case>
        <default/>
    </switch>
</sequence>

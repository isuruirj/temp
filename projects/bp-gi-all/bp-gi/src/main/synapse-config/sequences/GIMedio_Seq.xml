<?xml version="1.0" encoding="UTF-8"?>
<sequence name="GIMedio_Seq" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <log description="SEQ" level="custom">
        <property name="seq" value="-------------------- GIMedio_Seq --------------------"/>
    </log>
    <switch source="get-property('Action')">
        <case regex=".*crearRequerimientos.*">
            <sequence key="GIRequerimientos_Seq"/>
        </case>
        <default>
            <sequence key="GIProperties_Seq"/>
            <sequence key="GIMedio_Generic_Seq"/>
            <filter regex="false" source="get-property('isTicketGenerated')">
                <then>
                    <sequence key="GIReply_Seq"/>
                    <sequence key="GIMailbox_Seq"/>
                </then>
                <else>
                    <log description="No farther processing" level="custom">
                        <property name="msg" value="---------- Ticket generated. No farther processing ----------"/>
                    </log>
                </else>
            </filter>
        </default>
    </switch>
    <log level="custom">
        <property name="seq" value="-------------------- GIMedio_Seq --------------------"/>
        <property expression="$body/*" name="GIMedio_Seq _ RESPONSE RT"/>
        <property expression="$axis2:HTTP_SC" name="$axis2:HTTP_SC"/>
        <property expression="get-property('GUID')" name="GUID"/>
        <property expression="get-property('ESTADO')" name="ESTADO"/>
    </log>
    <respond/>
</sequence>

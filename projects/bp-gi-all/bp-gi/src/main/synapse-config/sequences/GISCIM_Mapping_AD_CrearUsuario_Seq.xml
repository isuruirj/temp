<?xml version="1.0" encoding="UTF-8"?>
<sequence name="GISCIM_Mapping_AD_CrearUsuario_Seq" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <log description="seq" level="custom">
        <property name="seq" value="-------------------- GISCIM_Mapping_AD_CrearUsuario_Seq --------------------"/>
    </log>
    <property description="mailbox" expression="$body/*/tem:especificos/tem:mailbox/text()" name="mailbox" scope="default" type="STRING" xmlns:tem="http://tempuri.org/"/>
    <property description="tier" expression="$body/*/tem:especificos/tem:tier/text()" name="tier" scope="default" type="STRING" xmlns:tem="http://tempuri.org/"/>
    <property description="AES_PAYLOAD" expression="$body/*/tem:claveAcceso/text()" name="AES_PAYLOAD" scope="default" type="STRING" xmlns:ns="http://org.apache.synapse/xsd" xmlns:tem="http://tempuri.org/"/>
    <property description="AES_ACTION" name="AES_ACTION" scope="default" type="STRING" value="DECRYPT"/>
    <sequence description="Decrypt Password" key="GIDecrypt_Seq"/>
    <payloadFactory description="AD Payload" media-type="json">
        <format>
        {
    "schemas": [
        "urn:ietf:params:scim:schemas:core:2.0:User",
        "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"
    ],
    "emails": [
        {
            "type": "other",
            "value": "$1"
        }
    ],
    "title": "$2",
    "EnterpriseUser": {
        "manager": {
            "displayName": "$3"
        },
        "Employeeid": "$4",
        "organization": "$5",
        "pager": "$6",
        "proxyAddresses": "$7",
        "mailNickname": "$8",
        "msDS-User-Account-Control-Computed": "$9",
        "userAccountControl": "$10",
        "physicalDeliveryOfficeName": "$11",
        "postOfficeBox": "$12",
        "city": "$13",
        "memberOf": "$14",
        "msTSHomeDrive": "$15",
        "msTSHomeDirectory": "$16",
        "msTSAllowLogon": "$17",
        "msTSConnectClientDrives": "$18",
        "msTSConnectPrinterDrives": "$19",
        "msTSDefaultToMainPrinter": "$20",
        "departament": "$21",
        "sn": "$22",
        "givenName": "$23",
        "telephoneNumber": "$24",
        "wWWHomePage": "$25",
        "userPrincipalName": "$26",
        "comment": "$27",
        "fullname": "$28",
        "containerInfo": "$29",
        "pwdLastSet": "$30"
    },
    "userName": "$31",
    "password": "$32"
}
        </format>
        <args>
            <arg evaluator="xml" expression="$body/*/tem:correoElectronico/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:title/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="fn:concat($body//*/tem:apellidosEmpleado/text(),' ', $body//*/tem:nombresEmpleado/text())" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:Employeeid/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:codigoCompania/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:pager/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:proxyAddresses/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:mailNickname/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:msDS-User-Account-Control-Computed/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:userAccountControl/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:physicalDeliveryOfficeName/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:postOfficeBox/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:city/text()" xmlns:tem="http://tempuri.org/"/>
            <arg value=""/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:msTSHomeDrive/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:msTSHomeDirectory/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:msTSAllowLogon/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:msTSConnectClientDrives/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:msTSConnectPrinterDrives/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:msTSDefaultToMainPrinter/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:codigoCentroCosto/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:apellidosEmpleado/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:nombresEmpleado/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:telephoneNumber/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:webPage/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="fn:concat($body/*/tem:tellerName/text(),'@',$body/*/tem:especificos/tem:domain/text())" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:identificacion/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="fn:concat($body//*/tem:apellidosEmpleado/text(),' ', $body//*/tem:nombresEmpleado/text())" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:containerInfo/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="$body/*/tem:especificos/tem:pwdLastSet/text()" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="fn:concat(get-property('aplicacion'),'/',$body/*/tem:tellerName/text())" xmlns:tem="http://tempuri.org/"/>
            <arg evaluator="xml" expression="get-property('AES_RESULTS')"/>
        </args>
    </payloadFactory>
</sequence>
